+++
title = "Virual K8S"
weight = 10
+++



1. Deploy the Pods



{{< code >}}
{
  "metadata": {
    "name": "arcadia-stocks",
    "labels": {},
    "annotations": {},
    "disable": false
  },
  "spec": {
    "service": {
      "num_replicas": 1,
      "containers": [
        {
          "name": "stocks",
          "image": {
            "name": "registry.hub.docker.com/sorinboiaf5/arcadia-stocks:ocp",
            "public": {},
            "pull_policy": "IMAGE_PULL_POLICY_DEFAULT"
          },
          "init_container": false,
          "flavor": "CONTAINER_FLAVOR_TYPE_TINY"
        }
      ],
      "deploy_options": {
        "deploy_re_sites": {
          "site": [
            {
              "tenant": "ves-io",
              "namespace": "system",
              "name": "tn2-lon",
              "kind": "site"
            }
          ]
        }
      },
      "advertise_options": {
        "advertise_in_cluster": {
          "port": {
            "info": {
              "port": 80,
              "protocol": "PROTOCOL_TCP",
              "target_port": 8080
            }
          }
        }
      }
    }
  }
}
{{< /code >}} 

2. Create the pool that will represent our backend services
![](/images/6/Slide2.PNG)

{{< code >}}
{
  "metadata": {
    "name": "arcadia-onprem-origin-pool",
    "labels": {},
    "annotations": {},
    "disable": false
  },
  "spec": {
    "origin_servers": [
      {
        "private_ip": {
          "ip": "10.1.1.5",
          "site_locator": {
            "site": {
              "namespace": "system",
              "name": "::ceOnPrem::",
              "kind": "site"
            }
          },
          "outside_network": {}
        },
        "labels": {}
      },
      {
        "private_ip": {
          "ip": "10.1.1.6",
          "site_locator": {
            "site": {
              "namespace": "system",
              "name": "::ceOnPrem::",
              "kind": "site"
            }
          },
          "outside_network": {}
        },
        "labels": {}
      }
    ],
    "no_tls": {},
    "port": 31970,
    "same_as_endpoint_port": {},
    "healthcheck": [
      {
        "namespace": "::namespace::",
        "name": "http-hc",
        "kind": "healthcheck"
      }
    ],
    "loadbalancer_algorithm": "LB_OVERRIDE",
    "endpoint_selection": "LOCAL_PREFERRED"
  }
}
{{< /code >}} 



3. Point the Load Balancer directly to the internal servers

![](/images/6/Slide3.PNG)